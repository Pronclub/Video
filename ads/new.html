<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sri Lanka vs Pakistan Poll - Preview</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #001a4d 0%, #003d0f 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .container {
            width: 100%;
            max-width: 56rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.875rem;
            }
        }

        .header p {
            font-size: 1.25rem;
            color: #fbbf24;
        }

        .header-image {
            margin-top: 1.5rem;
            width: 100%;
            max-width: 1270px;
            height: auto;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .header-image img {
            width: 100%;
            height: auto;
            display: block;
            aspect-ratio: 1270 / 720;
            object-fit: cover;
        }

        @media (max-width: 768px) {
            .header-image img {
                aspect-ratio: 16 / 9;
            }
        }

        .poll-card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 768px) {
            .poll-card {
                padding: 1.5rem;
            }
        }

        .poll-title {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .poll-title h2 {
            font-size: 1.875rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        .poll-title .vote-count {
            color: #6b7280;
            font-size: 1.125rem;
        }

        .vote-count-number {
            font-weight: 700;
            color: #fbbf24;
        }

        .option {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            background-color: #f9fafb;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover:not(.disabled) {
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Pakistan team colors - green and white */
        .option.pakistan.selected {
            border-color: #059669;
            background-color: #ecfdf5;
        }

        .option.pakistan:hover:not(.disabled) {
            border-color: #10b981;
        }

        /* Sri Lanka team colors - blue and gold */
        .option.srilanka.selected {
            border-color: #1e40af;
            background-color: #eff6ff;
        }

        .option.srilanka:hover:not(.disabled) {
            border-color: #3b82f6;
        }

        .option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .option-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .option-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .option-badge {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.125rem;
        }

        /* Pakistan badge - green */
        .option.pakistan.selected .option-badge {
            background-color: #10b981;
        }

        /* Sri Lanka badge - blue */
        .option.srilanka.selected .option-badge {
            background-color: #2563eb;
        }

        .option:not(.selected) .option-badge {
            background-color: #9ca3af;
        }

        .option h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #111827;
        }

        .checkmark {
            font-size: 1.5rem;
            font-weight: 700;
            display: none;
        }

        /* Pakistan checkmark - green */
        .option.pakistan.selected .checkmark {
            color: #10b981;
            display: block;
        }

        /* Sri Lanka checkmark - blue */
        .option.srilanka.selected .checkmark {
            color: #2563eb;
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 0.75rem;
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.5s ease;
        }

        /* Pakistan progress bar - green */
        .option.pakistan .progress-fill {
            background-color: #10b981;
        }

        /* Sri Lanka progress bar - blue */
        .option.srilanka .progress-fill {
            background-color: #2563eb;
        }

        .option:not(.selected) .progress-fill {
            background-color: #9ca3af;
        }

        .vote-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vote-count-text {
            color: #4b5563;
            font-weight: 600;
        }

        .percentage {
            font-size: 1.5rem;
            font-weight: 700;
        }

        /* Pakistan percentage - green */
        .option.pakistan .percentage {
            color: #10b981;
        }

        /* Sri Lanka percentage - blue */
        .option.srilanka .percentage {
            color: #2563eb;
        }

        .option:not(.selected) .percentage {
            color: #9ca3af;
        }

        .user-status {
            margin-top: 2rem;
            padding: 1rem;
            border: 2px solid #fbbf24;
            background-color: #fffbeb;
            border-radius: 0.5rem;
            text-align: center;
            display: none;
        }

        .user-status.active {
            display: block;
        }

        .user-status p {
            color: #78350f;
        }

        .user-vote-value {
            font-weight: 700;
            color: #f59e0b;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #fbbf24;
            color: #78350f;
        }

        .btn-primary:hover {
            background-color: #f59e0b;
        }

        .btn-secondary {
            background-color: #e5e7eb;
            color: #4b5563;
        }

        .btn-secondary:hover {
            background-color: #d1d5db;
        }

        .footer {
            margin-top: 2rem;
            text-align: center;
            color: #e5e7eb;
            font-size: 0.875rem;
        }

        .footer p {
            margin-bottom: 0.5rem;
        }

        .preview-notice {
            background-color: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .preview-notice p {
            color: #92400e;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üèè It's Poll Time!</h1>
            <p>Sri Lanka Vs Pakistan</p>
            <!-- Cricket banner image below header -->
            <div class="header-image">
                <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pandv-Py3xDGEDo4nfyTs4v3q6JSmyyz7p3c.jpg" alt="Sri Lanka vs Pakistan Cricket Teams" />
            </div>
        </div>

        <!-- Preview Notice -->
        <div class="preview-notice">
            <p>üîç Poll Preview Mode - Users can vote and see real-time results</p>
        </div>

        <!-- Poll Card -->
        <div class="poll-card">
            <div class="poll-title">
                <h2>Who will win the match?</h2>
                <div class="vote-count">
                    Total Votes: <span class="vote-count-number" id="totalVotes">12</span>
                </div>
            </div>

            <!-- Pakistan Option -->
            <div class="option pakistan" id="pakistanOption">
                <div class="option-header">
                    <div class="option-label">
                        <div class="option-badge">A</div>
                        <h3>Pakistan Wins</h3>
                    </div>
                    <div class="checkmark">‚úì</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="pakistanProgressFill" style="width: 58%"></div>
                </div>
                <div class="vote-stats">
                    <span class="vote-count-text" id="pakistanVoteCount">7 votes</span>
                    <span class="percentage" id="pakistanPercentage">58%</span>
                </div>
            </div>

            <!-- Sri Lanka Option -->
            <div class="option srilanka" id="srilankaOption">
                <div class="option-header">
                    <div class="option-label">
                        <div class="option-badge">B</div>
                        <h3>Sri Lanka Wins</h3>
                    </div>
                    <div class="checkmark">‚úì</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="srilankaProgressFill" style="width: 42%"></div>
                </div>
                <div class="vote-stats">
                    <span class="vote-count-text" id="srilankaVoteCount">5 votes</span>
                    <span class="percentage" id="srilankaPercentage">42%</span>
                </div>
            </div>

            <!-- User Status -->
            <div class="user-status" id="userStatus">
                <p>‚úì <span>Your vote is recorded:</span> You voted for <span class="user-vote-value" id="userVoteText"></span></p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" id="resetVote">Change My Vote</button>
                <button class="btn btn-secondary" id="sharePoll">Share This Poll</button>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="footer">
            <p>This is a preview of the poll. Users can vote and see results in real-time.</p>
            <p>Votes are saved locally in your browser.</p>
        </div>
    </div>

    <script>
        // DOM elements
        const pakistanOption = document.getElementById("pakistanOption");
        const srilankaOption = document.getElementById("srilankaOption");
        const userStatus = document.getElementById("userStatus");
        const resetVoteBtn = document.getElementById("resetVote");
        const sharePollBtn = document.getElementById("sharePoll");

        // State
        let userVote = null;
        let responses = [
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "pakistan", timestamp: new Date().toISOString() },
            { vote: "srilanka", timestamp: new Date().toISOString() },
            { vote: "srilanka", timestamp: new Date().toISOString() },
            { vote: "srilanka", timestamp: new Date().toISOString() },
            { vote: "srilanka", timestamp: new Date().toISOString() },
            { vote: "srilanka", timestamp: new Date().toISOString() }
        ];

        // Initialize poll on page load
        function initPoll() {
            loadFromLocalStorage();
            updateDisplay();
            
            // Add event listeners
            pakistanOption.addEventListener("click", () => handleVote("pakistan"));
            srilankaOption.addEventListener("click", () => handleVote("srilanka"));
            resetVoteBtn.addEventListener("click", resetVote);
            sharePollBtn.addEventListener("click", sharePoll);
        }

        // Load data from localStorage
        function loadFromLocalStorage() {
            const savedResponses = localStorage.getItem("poll_responses_preview");
            const savedUserVote = localStorage.getItem("user_vote_preview");
            
            if (savedResponses) {
                responses = JSON.parse(savedResponses);
            }
            
            if (savedUserVote) {
                userVote = savedUserVote;
            }
        }

        // Save data to localStorage
        function saveToLocalStorage() {
            localStorage.setItem("poll_responses_preview", JSON.stringify(responses));
            localStorage.setItem("user_vote_preview", userVote);
        }

        // Handle vote
        function handleVote(vote) {
            // If user already voted for this option, do nothing
            if (userVote === vote) return;
            
            // If user has a different vote, remove it first
            if (userVote) {
                const userIndex = responses.findIndex(r => r.vote === userVote);
                if (userIndex !== -1) {
                    responses.splice(userIndex, 1);
                }
            }
            
            // Add new vote
            responses.push({
                vote: vote,
                timestamp: new Date().toISOString()
            });
            
            userVote = vote;

            saveToLocalStorage();
            updateDisplay();
            
            // Show confirmation message
            showVoteConfirmation(vote);
        }

        // Reset user's vote
        function resetVote() {
            if (userVote) {
                const userIndex = responses.findIndex(r => r.vote === userVote);
                if (userIndex !== -1) {
                    responses.splice(userIndex, 1);
                }
                userVote = null;
                saveToLocalStorage();
                updateDisplay();
                
                // Show reset confirmation
                userStatus.classList.remove("active");
                alert("Your vote has been reset. You can vote again!");
            } else {
                alert("You haven't voted yet!");
            }
        }

        // Share poll
        function sharePoll() {
            if (navigator.share) {
                navigator.share({
                    title: 'Sri Lanka vs Pakistan Poll',
                    text: 'Vote for who will win the Sri Lanka vs Pakistan cricket match!',
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                alert("Share this poll with your friends!\n\nURL: " + window.location.href);
            }
        }

        // Show vote confirmation
        function showVoteConfirmation(vote) {
            const voteName = vote === "pakistan" ? "Pakistan" : "Sri Lanka";
            const message = `Thank you for voting! You selected ${voteName}.`;
            
            // Create a temporary confirmation message
            const confirmation = document.createElement('div');
            confirmation.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            confirmation.textContent = message;
            document.body.appendChild(confirmation);
            
            // Remove after 3 seconds
            setTimeout(() => {
                confirmation.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(confirmation);
                }, 300);
            }, 3000);
        }

        // Calculate and update vote counts
        function calculateVotes() {
            const pakistanVotes = responses.filter(r => r.vote === "pakistan").length;
            const srilankaVotes = responses.filter(r => r.vote === "srilanka").length;
            const totalVotes = pakistanVotes + srilankaVotes;
            
            const pakistanPercentage = totalVotes > 0 ? Math.round((pakistanVotes / totalVotes) * 100) : 0;
            const srilankaPercentage = totalVotes > 0 ? Math.round((srilankaVotes / totalVotes) * 100) : 0;
            
            return {
                pakistanVotes,
                srilankaVotes,
                totalVotes,
                pakistanPercentage,
                srilankaPercentage
            };
        }

        // Update display
        function updateDisplay() {
            const votes = calculateVotes();
            
            // Update vote counts
            document.getElementById("totalVotes").textContent = votes.totalVotes;
            document.getElementById("pakistanVoteCount").textContent = `${votes.pakistanVotes} votes`;
            document.getElementById("srilankaVoteCount").textContent = `${votes.srilankaVotes} votes`;
            document.getElementById("pakistanPercentage").textContent = `${votes.pakistanPercentage}%`;
            document.getElementById("srilankaPercentage").textContent = `${votes.srilankaPercentage}%`;
            
            // Update progress bars
            document.getElementById("pakistanProgressFill").style.width = `${votes.pakistanPercentage}%`;
            document.getElementById("srilankaProgressFill").style.width = `${votes.srilankaPercentage}%`;
            
            pakistanOption.classList.remove("selected");
            srilankaOption.classList.remove("selected");
            
            if (userVote === "pakistan") {
                pakistanOption.classList.add("selected");
            } else if (userVote === "srilanka") {
                srilankaOption.classList.add("selected");
            }
            
            // Update user status message
            if (userVote) {
                userStatus.classList.add("active");
                const voteName = userVote === "pakistan" ? "Pakistan" : "Sri Lanka";
                document.getElementById("userVoteText").textContent = voteName;
            } else {
                userStatus.classList.remove("active");
            }
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        window.addEventListener("DOMContentLoaded", initPoll);
    </script>
</body>
</html>
